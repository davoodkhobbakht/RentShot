
{% extends "../base.html" %}
{% block content %}
  <h1>{{ product.name }}</h1>
  <p>{{ product.description }}</p>
  <p>Price per day: ${{ product.price_per_day }}</p>
  <h2>Availability Calendar:</h2>
  <div id="availability-calendar"></div>

  <a href="{% url 'reserve_product' product.id %}">Reserve this product</a>
  		<!-- Start Why Choose Us Section -->
      <div class="single-product">
        <div>
          <p style="position: absolute; color: black; font-weight: bold; font-size: 30px; margin-left: 750px; direction: rtl; margin-top: 80px;">نام محصول دوربین برای اجاره Canon</p>
  <p style="max-width: 500px; position: absolute; direction: rtl; margin-top: 150px; margin-left: 650px;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ، و با استفاده از طراحان گرافیک است، چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است، و برای شرایط فعلی تکنولوژی مورد نیاز، و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد، کتابهای زیادی در شصت و سه درصد گذشته حال و آینده، شناخت فراوان جامعه و متخصصان را می طلبد، تا با نرم افزارها شناخت بیشتری را برای طراحان رایانه ای علی الخصوص طراحان خلاقی، و فرهنگ پیشرو در زبان فارسی ایجاد کرد، در این صورت می توان امید داشت که تمام و دشواری موجود در ارائه راهکارها، و شرایط سخت تایپ به پایان رسد و زمان مورد نیاز شامل حروفچینی دستاوردهای اصلی، و جوابگوی سوالات پیوسته اهل دنیای موجود طراحی اساسا مورد استفاده قرار گیرد.</p>
          <img class="single-img" src="images/product-1.png"></div>
          <div style="width: 300px; height: 400px; background-color: rgba(128, 128, 128, 0.493); position: absolute; top: 200px; left: 380px; border-radius: 30px; border: solid gray;"></div>
      <p style="color: green; font-weight: bold; font-size: 25px; margin-left: 290px;">20T/pd 15T/pw 10T/pm</p>
      <div ><button class="btn btn-black btn-lg py-3" style="margin-left: 300px; width: 250px; height: 80px; box-shadow: 1px 1px 5px gray;">اجاره محصول</button></div>
  
    </div>
      <!-- End Why Choose Us Section -->
  
      <!-- Start Product Section -->
      <div class="wave">
      </div>
      <div class="product-section pt-0">
        <div class="container">
          <div class="row">
  
            <!-- Start Column 1 -->
            <div class="col-md-12 col-lg-3 mb-5 mb-lg-0">
              <h2 class="mb-4 section-title" style="margin-top: 100px;">محصولات مشابه</h2>
              <p><a href="shop.html" class="btn">دیدن همه محصولات</a></p>
            </div> 
            <!-- End Column 1 -->
  
            <!-- Start Column 2 -->
            <div class="col-12 col-md-4 col-lg-3 mb-5 mb-md-0">
              <a class="product-item" href="#">
                <img src="images/product-1.png" class="img-fluid product-thumbnail">
                <h3 class="product-title">Nordic Chair</h3>
                <strong class="product-price">$50.00</strong>
  
                <span class="icon-cross">
                  <img src="images/cross.svg" class="img-fluid">
                </span>
              </a>
            </div> 
            <!-- End Column 2 -->
  
            <!-- Start Column 3 -->
            <div class="col-12 col-md-4 col-lg-3 mb-5 mb-md-0">
              <a class="product-item" href="#">
                <img src="images/product-2.png" class="img-fluid product-thumbnail">
                <h3 class="product-title">Kruzo Aero Chair</h3>
                <strong class="product-price">$78.00</strong>
  
                <span class="icon-cross">
                  <img src="images/cross.svg" class="img-fluid">
                </span>
              </a>
            </div>
            <!-- End Column 3 -->
  
            <!-- Start Column 4 -->
            <div class="col-12 col-md-4 col-lg-3 mb-5 mb-md-0">
              <a class="product-item" href="#">
                <img src="images/product-3.png" class="img-fluid product-thumbnail">
                <h3 class="product-title">Ergonomic Chair</h3>
                <strong class="product-price">$43.00</strong>
  
                <span class="icon-cross">
                  <img src="images/cross.svg" class="img-fluid">
                </span>
              </a>
            </div>
            <!-- End Column 4 -->
  
          </div>
        </div>
      </div>
      <!-- End Product Section -->
  
  {% endblock %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      // Fetch availability data via AJAX
      $.ajax({
        url: "{% url 'product_availability' product.id %}",
        type: 'GET',
        dataType: 'json',
        success: function(data) {
          // Use the availability data to display a simple calendar
          // You can implement your own rendering logic here
          $('#availability-calendar').html(renderAvailabilityCalendar(data));
        },
        error: function() {
          $('#availability-calendar').html('Error fetching availability data.');
        }
      });
    });
  
    function renderAvailabilityCalendar(data) {
      // Implement your rendering logic here to display the calendar
      // You can use libraries like FullCalendar for more advanced features
      // Here's a basic example of rendering dates as 'Available' or 'Not Available'
      let calendar = '<table>';
      for (let date in data) {
        let status = data[date] ? 'Available' : 'Not Available';
        calendar += `<tr><td>${date}</td><td>${status}</td></tr>`;
      }
      calendar += '</table>';
      return calendar;
    }
  </script>

